<html>
<head>
<title>JavaScript Live Editor</title>
<link rel="stylesheet" type="text/css" href="dsedit.css" />
<script src="jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="jquery-ui-1.8.custom.min.js" type="text/javascript"></script>
<script src="jquery.layout-latest.js"  type="text/javascript"></script>
<script src="CodeMirror/js/codemirror.js" type="text/javascript"></script>
<script>
$(document).ready(function() 
{
    var editor = CodeMirror.fromTextArea("codeeditor", 
    {
        parserfile: ["tokenizejavascript.js", "parsejavascript.js"],
        path: "CodeMirror/js/",
        stylesheet: "CodeMirror/css/jscolors.css",
        height: "100%",
        width: "100%",
        indentUnit: 4,
        autoMatchParens: true
        // lineNumbers: true
    });
    
    var result = CodeMirror.fromTextArea("resulteditor",
    {
        parserfile: ["tokenizejavascript.js", "parsejavascript.js"],
        path: "CodeMirror/js/",
        stylesheet: "CodeMirror/css/jscolors.css",
        height: "100%",
        width: "100%"
    });    

    $("input.buttonRun").click(function() 
    {
        try {
            var code = editor.selection();
            var res = eval(code);
            showResult(res); }
        catch (error) {
             showResult("{*.*} " + error); }
    });
    
    $("input.buttonIndentSelection").click(function() 
    {
        editor.reindentSelection(); 
    });
    
    $("input.buttonUndo").click(function() 
    {
        editor.undo(); 
    });

    $("input.buttonRedo").click(function() 
    {
        editor.redo(); 
    });
    
    $("input.buttonClearResult").click(function() 
    {
        result.setCode(""); 
    });

    function showResult(res)
    {
        result.setCode(res + "\n" + result.getCode()); 
    }

    //$("body").layout({ applyDefaultStyles: true });
    $("body").layout();
    
});
</script>
</head>
<body>

<div class="ui-layout-center">
<div id="codearea">
<textarea id="codeeditor">
// ***************************************************************
// ******   Welcome to the Wonderful World of JavaScript!   ******
// ***************************************************************
//
// This is a JavaScript editor where you can evaluate code directly
// in the browser, and instantly see the result. Select the code
// you want to run and click the Evaluate button.
//
// Tested in Firefox 3.5

// Select and evaluate, the result is shown below.
1 + 2;

// Select both lines and evaluate, result of last line is shown.
// (You cannot evaluate this one line at a time.)
function twice(n) { return n * 2; };
twice(22);

// Each evaluation takes place in its own scope; the scope is
// lost when the evaluation returns. To make variables persistent
// they must be defined in the global scope. The following can be
// evaluated one line at a time.
twice = function(n) { return n * 2; };
twice(22);

// Sketch of an inspector window.
inspect = function(obj)
{
    var inspector = window.open("", "inspector",
        "width=600, height=500, toolbar=yes, status=yes, menubar=yes, scrollbars=yes, resizable=yes");
    for (var prop in obj)
    {
        inspector.document.write("- " + prop + " " + obj[prop] + "<br />\n");
    }
    inspector.document.bgColor = "lightblue";
    inspector.document.close();
};

// Try this.
inspect(window);

inspect({ name: "Micke", age: 48 });

// Another thing to try - interactively manipulate 
// an object in a window.
win = window.open("", "Playfield",
    "width=300,  height=300, resizable=yes");
obj = document.createElement("div");
win.document.body.appendChild(obj);
obj.style.position = "absolute";
obj.style.left = "50px";
obj.style.top = "50px";
obj.style.width = "100px";
obj.style.height = "100px";
obj.style.backgroundColor = "red";

</textarea>
</div>
</div>

<div class="ui-layout-south">
<div id="toolbar">
<input value="Evaluate selection" class="buttonRun" type="button" />
<input value="Indent selection" class="buttonIndentSelection" type="button" />
<input value="Undo" class="buttonUndo" type="button" />
<input value="Redo" class="buttonRedo" type="button" />
<input value="Clear result area" class="buttonClearResult" type="button" />
<a href="index.html" target="_blank">New&nbsp;Window</a>
<a href="http://divineprogrammer.blogspot.com/" target="_blank">Blog</a>
<a href="http://twitter.com/divineprog/" target="_blank">Twitter</a>
</div>
<div id="resultarea">
<textarea id="resulteditor" >
</textarea>
</div>

</div>
</body>
</html>
